<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Nomad2016 by DevProgress</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href="https://fonts.googleapis.com/css?family=Montserrat+Alternates:400,700|Roboto:400,900" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/tabletop.js/1.4.3/tabletop.js"></script>
    <!-- Mapsheet - We'll need to include Google Maps, Handlebars for templating, and jQuery for general futzing about -->
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBDr7SOW5aAcJ-t3ZF4ctxLCGq4ECTYpg4"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/1.0.0/handlebars.min.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <!-- Tabletop.js for accessing Google Spreadsheets and Mapsheet.js for mapping, of course -->
    <script type="text/javascript" src="./src/mapsheet.js"></script>
    <script type="text/javascript" src="./src/fecha.min.js"></script>
    <style media="screen">
      #map {
        width: 100%;
      }
    </style>

  </head>

  <body>
    <section class="page-header">
      <h1 class="project-name">nomad2016</h1>
      <h2 class="project-tagline">Look on the map below to find a ride and get ready to hit the road for Hillary.</h2>
      <a class="typeform-share link btn" href="https://volunteer2016.typeform.com/to/gVKKXS" data-mode="1" target="_blank">Sign up to drive</a>
<script>(function(){var qs,js,q,s,d=document,gi=d.getElementById,ce=d.createElement,gt=d.getElementsByTagName,id='typef_orm',b='https://s3-eu-west-1.amazonaws.com/share.typeform.com/';if(!gi.call(d,id)){js=ce.call(d,'script');js.id=id;js.src=b+'share.js';q=gt.call(d,'script')[0];q.parentNode.insertBefore(js,q)}})()</script>

      <a href="placeholder" class="btn">Can't find an available ride? Join the wait list.</a>


    </section>

    <section class="main-content">

      <!-- This is where the map will go -->
      <div id="map"></div>
      <script id="popup-template" type="text/x-handlebars-template">
        <h3>{{City}}, {{State}} to {{[Destination City]}}</h3>
        <dl>
          <dt>Pickup</dt><dd>{{[Start location]}}</dd>
          <dt>Leaving</dt><dd>{{start}}</dd>
          <dt>Returning</dt><dd>{{return}}</dd>
          <dt>Available seats</dt><dd>{{[Available seats]}}</dd>
        </dl>
        <a href="{{[HfA Event]}}" target="_blank">HfA event</a>
        <br/>
        <a href="https://example.com?ride={{ID}}" target="_blank">Request a seat</a>
      </script>

      <!-- Okay, time to do this! -->
      <script type="text/javascript">
        $(document).ready( function() {
          // Make sure the spreadsheet is published!
          var published_spreadsheet_url = 'https://docs.google.com/spreadsheets/d/1s6x7JO6-oaAcHsTy3UgCtjzmTL7UPjBBDZIol_3O9FQ/pubhtml';

          // Let's get the popup template and compile it using Handlebars
          var source   = $("#popup-template").html();
          var template = Handlebars.compile(source);

          var df = function(dateString) {
            if (dateString) {
              var date = fecha.parse(dateString, 'YYYY-MM-DD HH:mm:ss')
              return fecha.format(date, 'MMM Do, h:mma')
            } else {
              return "n/a"
            }
          }

          // OK, now let's make the map
          var map = Mapsheet({
            key: published_spreadsheet_url,
            element: "map",
            markerOptions: {
              iconUrl: './src/pin.png'
						},
            popupTemplate: function(element) {
              element.start = df(element['Start date and time'])
              element.return = df(element['return date and time'])
              return template(element)
            }
          });
        });
      </script>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/DevProgress/nomad2016">Nomad2016</a> is maintained by <a href="https://github.com/DevProgress">DevProgress</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>


  </body>
</html>
